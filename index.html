<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Flappy Birch + Hack Menu</title>
<style>
  :root{
    --menu-radius:16px;
    --glass-bg:rgba(255,255,255,0.10);
    --glass-stroke:rgba(255,255,255,0.35);
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --rainbow-size: 280%;
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
  html,body{height:100%;margin:0;background:#0b0e14;color:#fff;font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;overflow:hidden;}
  .wrap{
    position:relative;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:10px;
  }

  /* Game area */
  #game{
    width:360px; height:640px; max-width:95vw; max-height:88vh;
    background: linear-gradient(180deg,#6dd5fa 0%,#2980b9 60%, #145374 100%);
    border-radius:18px;
    box-shadow: var(--shadow);
  }
  .hud{
    position:absolute; top:12px; left:50%; transform:translateX(-50%);
    font-weight:700; font-size:24px; text-shadow:0 2px 6px rgba(0,0,0,.4);
    letter-spacing:1px;
    user-select:none;
  }
  .subhud{
    position:absolute; top:12px; right:14px; font-size:12px; opacity:.8;
    text-align:right; line-height:1.2;
  }

  /* Floating cat meme button */
  .hack-btn{
    position:fixed; right:14px; bottom:16px; z-index:50;
    width:58px; height:58px; border-radius:50%;
    display:grid; place-items:center;
    background:
      radial-gradient(60% 60% at 30% 30%, rgba(255,255,255,.35), transparent 60%),
      linear-gradient(135deg,#141e30,#243b55);
    border:2px solid rgba(255,255,255,.35);
    box-shadow: 0 10px 20px rgba(0,0,0,.45), inset 0 0 10px rgba(255,255,255,.08);
    cursor:pointer;
    user-select:none;
  }
  .hack-btn .cat{
    font-size:28px; filter: drop-shadow(0 1px 0 rgba(0,0,0,.35));
    transform: translateY(-1px);
  }
  .hack-btn:active{ transform: translateY(1px) scale(.98); }

  /* Hack menu (rainbow border + glass inside) */
  .menu-shell{
    position:fixed; right:10px; bottom:90px; z-index:60; display:none;
  }
  .menu-rainbow{
    position:relative;
    padding:2px; border-radius: var(--menu-radius);
    background:
      conic-gradient(from 0deg,
      #ff0066, #ff7a00, #ffee00, #39ff14, #00f5ff, #5866ff, #b400ff, #ff0066);
    animation: spin 6s linear infinite;
    filter: saturate(1.2);
  }
  @keyframes spin{ to{ transform: rotate(1turn); } }

  .menu-card{
    width: 280px; max-width: 88vw;
    border-radius: calc(var(--menu-radius) - 2px);
    background:
      radial-gradient(120% 80% at 10% 0%, rgba(255,255,255,.20), transparent 60%),
      radial-gradient(120% 100% at 100% 100%, rgba(255,255,255,.10), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border:1px solid var(--glass-stroke);
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .menu-head{
    display:flex; align-items:center; gap:8px; padding:10px 12px;
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0));
    cursor:grab; user-select:none;
  }
  .menu-head:active{ cursor:grabbing; }
  .menu-ico{
    width:28px; height:28px; border-radius:50%; display:grid; place-items:center;
    background: radial-gradient(70% 70% at 30% 30%, rgba(255,255,255,.35), transparent 60%),
                linear-gradient(135deg,#1f2338,#1a2a3d);
    border:1px solid rgba(255,255,255,.35);
  }
  .menu-title{ font-weight:800; letter-spacing:.3px; }
  .menu-body{ padding:12px; display:grid; gap:12px; }

  .group-title{ font-size:12px; opacity:.8; letter-spacing:.4px; text-transform:uppercase; }
  .speed-row{ display:flex; gap:8px; }
  .chip{
    flex:1; padding:10px 0; border-radius:12px; font-weight:700;
    text-align:center; cursor:pointer; user-select:none;
    background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
    border:1px solid rgba(255,255,255,.35);
    box-shadow: inset 0 0 10px rgba(255,255,255,.06);
    transition: transform .08s ease;
  }
  .chip:active{ transform:translateY(1px) scale(.98); }
  .chip.active{
    outline:2px solid rgba(255,255,255,.8);
    background: linear-gradient(180deg, rgba(255,255,255,.25), rgba(255,255,255,.08));
  }

  .antiban{
    display:grid; gap:8px;
  }
  .btn{
    padding:12px; border-radius:12px; text-align:center; font-weight:800; cursor:pointer;
    background: linear-gradient(180deg, #00f5ff44, #5866ff44);
    border:1px solid rgba(255,255,255,.45);
    box-shadow: inset 0 0 14px rgba(255,255,255,.10), 0 8px 18px rgba(0,0,0,.35);
    transition: transform .08s ease, filter .2s ease;
    user-select:none;
  }
  .btn:active{ transform: translateY(1px) scale(.99); }
  .btn[disabled]{ opacity:.6; pointer-events:none; filter: grayscale(.3); }

  .bar{
    width:100%; height:10px; border-radius:999px; overflow:hidden;
    background: rgba(255,255,255,.15); border: 1px solid rgba(255,255,255,.35);
  }
  .bar > i{
    display:block; height:100%; width:0%;
    background: linear-gradient(90deg,#32d1ff,#7a8cff,#cc66ff);
    box-shadow: inset 0 0 8px rgba(255,255,255,.35);
    transition: width .2s linear;
  }

  .menu-foot{
    font-size:11px; opacity:.75; padding:0 12px 12px 12px; text-align:center;
  }

  /* Toggle visible */
  .menu-shell.show{ display:block; }

  /* Helper: tiny watermark version */
  .ver{
    position:fixed; left:10px; bottom:10px; opacity:.4; font-size:11px;
    letter-spacing:.4px; z-index:1;
  }
</style>
</head>
<body>
  <div class="wrap">
    <canvas id="game" width="360" height="640"></canvas>
    <div class="hud" id="score">0</div>
    <div class="subhud">
      <div>Best: <span id="best">0</span></div>
      <div>T·ªëc ƒë·ªô: <span id="spdlabel">1√ó</span></div>
    </div>
  </div>

  <!-- Floating meme cat button -->
  <button class="hack-btn" id="hackBtn" aria-label="M·ªü Hack Menu">
    <span class="cat">üòº</span>
  </button>

  <!-- Hack Menu -->
  <div class="menu-shell" id="menu">
    <div class="menu-rainbow">
      <div class="menu-card" id="menuCard">
        <div class="menu-head" id="menuDrag">
          <div class="menu-ico">üòº</div>
          <div class="menu-title">Birch Hack Menu</div>
        </div>
        <div class="menu-body">
          <div>
            <div class="group-title">T·ªëc ƒë·ªô</div>
            <div class="speed-row">
              <div class="chip active" data-speed="1">1√ó</div>
              <div class="chip" data-speed="2">2√ó</div>
              <div class="chip" data-speed="3">3√ó</div>
            </div>
          </div>
          <div class="antiban">
            <div class="group-title">Antiban</div>
            <button class="btn" id="antibanBtn">B·∫≠t Antiban</button>
            <div class="bar"><i id="barFill"></i></div>
          </div>
        </div>
        <div class="menu-foot">Vi·ªÅn rainbow ki·ªÉu Samsung ‚ú®</div>
      </div>
    </div>
  </div>

  <div class="ver">Flappy Birch v1.0</div>

<script>
(() => {
  /* ========= Simple Flappy Birch ========= */
  const cvs = document.getElementById('game');
  const ctx = cvs.getContext('2d');

  const W = cvs.width, H = cvs.height;

  // Game state
  let running = true;
  let score = 0, best = +localStorage.getItem('fb_best') || 0;
  document.getElementById('best').textContent = best;

  // Speed multiplier controlled by hack menu
  let speedMult = 1;
  const speedLabel = document.getElementById('spdlabel');

  // Bird
  const bird = {
    x: W * 0.28,
    y: H * 0.45,
    r: 12,
    vy: 0,
    gravity: 0.48,
    jumpV: -7.6,
  };

  // Pipes
  const pipes = [];
  const pipeW = 60;
  let gap = 150;
  let basePipeSpeed = 2.2; // pixels per frame at 60fps
  let spawnEveryMs = 1400;
  let lastSpawn = 0;

  function resetGame() {
    score = 0;
    bird.y = H * 0.45;
    bird.vy = 0;
    pipes.length = 0;
    lastSpawn = 0;
    running = true;
  }

  function spawnPipe() {
    const margin = 70;
    const gapY = margin + Math.random() * (H - margin*2 - gap);
    pipes.push({ x: W + pipeW, gapY, passed:false });
  }

  function drawBird() {
    // body
    ctx.save();
    ctx.translate(bird.x, bird.y);
    const tilt = Math.max(-0.5, Math.min(0.5, bird.vy/10));
    ctx.rotate(tilt);
    // body
    const grd = ctx.createLinearGradient(-15,-15, 20, 20);
    grd.addColorStop(0, '#ffe66d');
    grd.addColorStop(1, '#ff9f1c');
    ctx.fillStyle = grd;
    roundRect(ctx,-16,-12,32,24,12,true,false);
    // wing
    ctx.fillStyle = 'rgba(255,255,255,.9)';
    roundRect(ctx,-8,-6,16,12,6,true,false);
    // eye
    ctx.beginPath(); ctx.fillStyle='#fff'; ctx.arc(6,-4,4,0,Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle='#222'; ctx.arc(7,-4,2,0,Math.PI*2); ctx.fill();
    // beak
    ctx.fillStyle = '#ffd166';
    roundRect(ctx,14,-2,10,6,3,true,false);
    ctx.restore();
  }

  function drawPipes() {
    ctx.fillStyle = '#2ecc71';
    ctx.strokeStyle = '#27ae60';
    ctx.lineWidth = 4;
    pipes.forEach(p => {
      // top
      ctx.beginPath();
      ctx.rect(p.x, 0, pipeW, p.gapY);
      ctx.fill(); ctx.stroke();
      // bottom
      ctx.beginPath();
      ctx.rect(p.x, p.gapY + gap, pipeW, H - (p.gapY + gap));
      ctx.fill(); ctx.stroke();
      // lips
      ctx.fillStyle = '#25b35f';
      ctx.fillRect(p.x-3, p.gapY-16, pipeW+6, 16);
      ctx.fillRect(p.x-3, p.gapY+gap, pipeW+6, 16);
      ctx.fillStyle = '#2ecc71';
    });
  }

  function collide() {
    if (bird.y + bird.r > H || bird.y - bird.r < 0) return true;
    for (const p of pipes) {
      const inX = bird.x + bird.r > p.x && bird.x - bird.r < p.x + pipeW;
      const inGap = bird.y - bird.r > p.gapY && bird.y + bird.r < p.gapY + gap;
      if (inX && !inGap) return true;
    }
    return false;
  }

  function roundRect(ctx, x, y, w, h, r, fill, stroke){
    if (w<2*r) r=w/2; if (h<2*r) r=h/2;
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.arcTo(x+w,y,x+w,y+h,r);
    ctx.arcTo(x+w,y+h,x,y+h,r);
    ctx.arcTo(x,y+h,x,y,r);
    ctx.arcTo(x,y,x+w,y,r);
    if (fill) ctx.fill(); if (stroke) ctx.stroke();
  }

  // Input
  function flap(){ bird.vy = bird.jumpV; }
  cvs.addEventListener('pointerdown', flap);
  window.addEventListener('keydown', e => { if (e.code==='Space' || e.code==='ArrowUp') flap(); });

  // Main loop (delta-time + speed multiplier)
  let lastT = performance.now();
  function loop(now){
    const rawDt = now - lastT; lastT = now;
    const dt = Math.min(34, rawDt) * (speedMult || 1); // clamp & speed hack
    ctx.clearRect(0,0,W,H);

    // Background ground
    const groundH = 60;
    ctx.fillStyle = '#87CEEB22'; ctx.fillRect(0,H-groundH,W,groundH);
    ctx.fillStyle = '#4f772d'; ctx.fillRect(0,H-groundH+8,W,groundH-8);

    // Spawn pipes
    lastSpawn += dt;
    const spawnMs = spawnEveryMs / (speedMult || 1);
    if (lastSpawn >= spawnMs) { lastSpawn = 0; spawnPipe(); }

    // Update bird
    bird.vy += bird.gravity * (dt/16);
    bird.y  += bird.vy     * (dt/16);

    // Update pipes
    const px = basePipeSpeed * (dt/1); // already scaled by dt
    for (const p of pipes){ p.x -= px; }
    while (pipes.length && pipes[0].x + pipeW < 0) pipes.shift();

    // Score
    for (const p of pipes){
      if (!p.passed && p.x + pipeW < bird.x - bird.r){
        p.passed = true; score++; 
        document.getElementById('score').textContent = score;
      }
    }

    // Draw
    drawPipes();
    drawBird();

    // Collision / reset
    if (collide()){
      running = false;
      best = Math.max(best, score);
      localStorage.setItem('fb_best', best);
      document.getElementById('best').textContent = best;
      // flash effect
      ctx.fillStyle = 'rgba(255,0,0,.25)';
      ctx.fillRect(0,0,W,H);
      setTimeout(resetGame, 500);
      lastT = performance.now();
    }

    if (running) requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  /* ========= Hack Menu logic ========= */
  const btn = document.getElementById('hackBtn');
  const menu = document.getElementById('menu');
  const chips = [...document.querySelectorAll('.chip')];
  const antibanBtn = document.getElementById('antibanBtn');
  const bar = document.getElementById('barFill');

  btn.addEventListener('click', () => {
    menu.classList.toggle('show');
  });

  chips.forEach(ch => {
    ch.addEventListener('click', () => {
      chips.forEach(c => c.classList.remove('active'));
      ch.classList.add('active');
      speedMult = +ch.dataset.speed || 1;
      speedLabel.textContent = speedMult + '√ó';
    });
  });

  antibanBtn.addEventListener('click', () => {
    // Visual-only: 1.8s progress
    antibanBtn.textContent = 'ƒêang k√≠ch ho·∫°t...';
    antibanBtn.setAttribute('disabled','');
    bar.style.transition = 'width 1.8s linear';
    bar.style.width = '100%';
    setTimeout(() => {
      antibanBtn.textContent = 'ƒê√£ b·∫£o v·ªá ‚úì';
      setTimeout(() => {
        // reset bar slowly fade out, then ready again
        bar.style.transition = 'width .4s ease';
        bar.style.width = '0%';
        antibanBtn.removeAttribute('disabled');
        antibanBtn.textContent = 'B·∫≠t Antiban';
      }, 20000); // gi·ªØ tr·∫°ng th√°i ƒë√£ b·∫≠t 20s (minh h·ªça)
    }, 1800);
  });

  /* ========= Make the menu draggable (stays on screen) ========= */
  const dragHandle = document.getElementById('menuDrag');
  const shell = document.getElementById('menu');
  let drag = null;

  function clamp(val, min, max){ return Math.max(min, Math.min(max, val)); }

  dragHandle.addEventListener('pointerdown', (e) => {
    dragHandle.setPointerCapture(e.pointerId);
    const rect = shell.getBoundingClientRect();
    drag = {
      sx: e.clientX, sy: e.clientY,
      ox: rect.left, oy: rect.top
    };
  });
  dragHandle.addEventListener('pointermove', (e) => {
    if (!drag) return;
    const dx = e.clientX - drag.sx;
    const dy = e.clientY - drag.sy;
    const nx = drag.ox + dx;
    const ny = drag.oy + dy;
    // clamp in viewport
    const vw = window.innerWidth, vh = window.innerHeight;
    const w = shell.offsetWidth, h = shell.offsetHeight;
    shell.style.left = clamp(nx, 6, vw - w - 6) + 'px';
    shell.style.top  = clamp(ny, 6, vh - h - 6) + 'px';
    shell.style.right = 'auto';
    shell.style.bottom = 'auto';
  });
  dragHandle.addEventListener('pointerup', () => { drag = null; });

})();
</script>
</body>
</html>
